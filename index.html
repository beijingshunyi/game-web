<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>万花楼-《万象谜题》</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: "Microsoft YaHei", Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            padding: 20px 0;
            color: white;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-bottom: 30px;
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }

        .game-info {
            flex: 2;
            min-width: 300px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .game-info h2 {
            color: #667eea;
            margin-bottom: 15px;
            border-bottom: 2px solid #667eea;
            padding-bottom: 10px;
        }

        .game-info ul {
            padding-left: 20px;
            margin-bottom: 20px;
        }

        .game-info li {
            margin-bottom: 10px;
        }

        .game-features {
            flex: 1;
            min-width: 250px;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .feature-item {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #ccc;
        }

        .feature-item:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .feature-title {
            font-weight: bold;
            color: #764ba2;
            margin-bottom: 5px;
        }

        .auth-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
        }

        .telegram-login {
            display: inline-block;
            background: #0088cc;
            color: white;
            padding: 15px 30px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1.2em;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .telegram-login:hover {
            background: #0077b3;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            gap: 15px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            flex: 1;
            min-width: 200px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }

        .stat-label {
            color: #666;
            margin-top: 5px;
        }

        .navigation {
            display: flex;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .nav-button {
            background: #764ba2;
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .nav-button:hover {
            background: #6a4190;
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }

        .game-section {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            margin-bottom: 30px;
            display: none;
        }

        .section-title {
            text-align: center;
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .puzzle-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .puzzle-item {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .puzzle-item:hover {
            border-color: #667eea;
            background: #eef2ff;
            transform: translateY(-3px);
        }

        .puzzle-item.locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .puzzle-number {
            font-size: 1.5em;
            font-weight: bold;
            color: #764ba2;
        }

        .puzzle-reward {
            font-size: 0.9em;
            color: #6c757d;
            margin-top: 5px;
        }

        .back-button {
            background: #6c757d;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin-bottom: 20px;
            font-size: 1em;
        }

        .back-button:hover {
            background: #5a6268;
        }

        footer {
            text-align: center;
            padding: 20px;
            color: white;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            margin-top: 30px;
        }

        footer a {
            color: #ffd700;
            text-decoration: none;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .telegram-group-link {
            display: inline-block;
            background: #2ca5e0;
            color: white;
            padding: 10px 20px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            margin: 10px 0;
            transition: all 0.3s ease;
        }

        .telegram-group-link:hover {
            background: #1a93c1;
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            h1 {
                font-size: 2em;
            }
            
            .main-content {
                flex-direction: column;
            }
            
            .stat-card {
                min-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>万花楼-《万象谜题》</h1>
            <p class="subtitle">挑战智力极限，赢取万花币奖励</p>
        </header>

        <div class="auth-section" id="authSection">
            <h2>欢迎来到万象谜题世界</h2>
            <p>超过2000个精心设计的关卡等你来挑战</p>
            <p>通过游戏获得万花币，可直接提现至支付宝</p>
            <br>
            <script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="bjxcyouxiBot" data-size="large" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
            <p>请使用Telegram登录以开始游戏</p>
            <br>
            <a href="https://t.me/bjxcyouxi" target="_blank" class="telegram-group-link">加入Telegram游戏群组</a>
            <p>在群组内发送"游戏"二字获取游戏链接</p>
        </div>

        <div class="game-stats" id="gameStats" style="display: none;">
            <div class="stat-card">
                <div class="stat-number" id="coinsCount">0</div>
                <div class="stat-label">万花币</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="currentLevel">1</div>
                <div class="stat-label">当前关卡</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="checkInDays">0</div>
                <div class="stat-label">连续签到(天)</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="ranking">-</div>
                <div class="stat-label">本月排名</div>
            </div>
        </div>

        <div class="navigation" id="mainNavigation" style="display: none;">
            <button class="nav-button" onclick="showSection('levels')">关卡选择</button>
            <button class="nav-button" onclick="showSection('checkin')">每日签到</button>
            <button class="nav-button" onclick="showSection('ranking')">排行榜</button>
            <button class="nav-button" onclick="showSection('withdraw')">提现</button>
            <button class="nav-button" onclick="showSection('achievements')">成就系统</button>
        </div>

        <div class="game-section" id="levelsSection">
            <button class="back-button" onclick="showMain()">← 返回</button>
            <h2 class="section-title">关卡选择</h2>
            <div class="puzzle-grid" id="puzzleGrid">
                <!-- 关卡将通过JavaScript动态生成 -->
            </div>
        </div>

        <div class="game-section" id="checkinSection">
            <button class="back-button" onclick="showMain()">← 返回</button>
            <h2 class="section-title">每日签到</h2>
            <div class="game-stats">
                <div class="stat-card">
                    <div class="stat-number" id="checkInStreak">0</div>
                    <div class="stat-label">连续签到天数</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="todayReward">0</div>
                    <div class="stat-label">今日签到奖励</div>
                </div>
            </div>
            <div style="text-align: center; margin-top: 30px;">
                <button class="nav-button" id="checkInButton" onclick="window.game.checkIn()">立即签到</button>
                <p id="checkInStatus" style="margin-top: 15px;"></p>
            </div>
        </div>

        <div class="game-section" id="rankingSection">
            <button class="back-button" onclick="showMain()">← 返回</button>
            <h2 class="section-title">全服排行榜</h2>
            <div id="rankingList">
                <!-- 排行榜将通过JavaScript动态生成 -->
            </div>
        </div>

        <div class="game-section" id="withdrawSection">
            <button class="back-button" onclick="showMain()">← 返回</button>
            <h2 class="section-title">万花币提现</h2>
            <div style="max-width: 500px; margin: 0 auto;">
                <div class="stat-card" style="margin-bottom: 20px;">
                    <div class="stat-number" id="withdrawCoins">0</div>
                    <div class="stat-label">可用万花币</div>
                </div>
                <div style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                    <p>提现规则：</p>
                    <ul>
                        <li>1000万花币 = 10元人民币</li>
                        <li>仅支持支付宝提现</li>
                        <li>最低提现金额：10元（1000万花币）</li>
                        <li>提现审核时间：3-5个工作日</li>
                    </ul>
                    <div style="margin-top: 20px;">
                        <label for="alipayAccount">支付宝账号：</label>
                        <input type="text" id="alipayAccount" placeholder="请输入支付宝账号" style="width: 100%; padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc;">
                    </div>
                    <div style="margin-top: 15px;">
                        <label for="realName">真实姓名：</label>
                        <input type="text" id="realName" placeholder="请输入真实姓名" style="width: 100%; padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc;">
                    </div>
                    <div style="margin-top: 15px;">
                        <label for="withdrawAmount">提现金额（元）：</label>
                        <select id="withdrawAmount" style="width: 100%; padding: 10px; margin-top: 5px; border-radius: 5px; border: 1px solid #ccc;">
                            <option value="10">10元 (1000万花币)</option>
                            <option value="20">20元 (2000万花币)</option>
                            <option value="50">50元 (5000万花币)</option>
                            <option value="100">100元 (10000万花币)</option>
                        </select>
                    </div>
                    <button class="nav-button" style="margin-top: 20px; width: 100%;" onclick="window.requestWithdraw()">申请提现</button>
                </div>
            </div>
        </div>

        <div class="game-section" id="achievementsSection">
            <button class="back-button" onclick="showMain()">← 返回</button>
            <h2 class="section-title">成就系统</h2>
            <div id="achievementsList">
                <!-- 成就将通过JavaScript动态生成 -->
            </div>
        </div>

        <footer>
            <p>本游戏由北京修车【万花楼】赞助；由 <a href="https://t.me/bjxc010" target="_blank">@bjxc010</a> 开发</p>
        </footer>
    </div>

    <script src="game.js"></script>
    <script>
        // 显示特定部分
        function showSection(section) {
            // 隐藏所有部分
            document.getElementById('levelsSection').style.display = 'none';
            document.getElementById('checkinSection').style.display = 'none';
            document.getElementById('rankingSection').style.display = 'none';
            document.getElementById('withdrawSection').style.display = 'none';
            document.getElementById('achievementsSection').style.display = 'none';
            
            // 显示选中的部分
            document.getElementById(section + 'Section').style.display = 'block';
        }
        
        // 显示主界面
        function showMain() {
            // 隐藏所有部分
            document.getElementById('levelsSection').style.display = 'none';
            document.getElementById('checkinSection').style.display = 'none';
            document.getElementById('rankingSection').style.display = 'none';
            document.getElementById('withdrawSection').style.display = 'none';
            document.getElementById('achievementsSection').style.display = 'none';
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 模拟一些成就数据
            const achievementsList = document.getElementById('achievementsList');
            achievementsList.innerHTML = `
                <div class="feature-item">
                    <div class="feature-title">初出茅庐</div>
                    <p>完成第1关</p>
                    <p style="color: green;">已完成 ✓</p>
                </div>
                <div class="feature-item">
                    <div class="feature-title">小试牛刀</div>
                    <p>完成第10关</p>
                    <p style="color: green;">已完成 ✓</p>
                </div>
                <div class="feature-item">
                    <div class="feature-title">渐入佳境</div>
                    <p>完成第50关</p>
                    <p style="color: #6c757d;">未完成</p>
                </div>
                <div class="feature-item">
                    <div class="feature-title">坚持不懈</div>
                    <p>连续签到7天</p>
                    <p style="color: #6c757d;">未完成</p>
                </div>
            `;
        });
    </script>
</body>
</html>
